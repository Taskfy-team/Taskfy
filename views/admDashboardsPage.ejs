<!DOCTYPE html>
<html lang="pt-br">
<head>
  <%- include('partials/head'); %>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script>
  google.charts.load('current', {'packages':['corechart']});
  google.charts.setOnLoadCallback(drawChart);

  function drawChart() {
    const data = google.visualization.arrayToDataTable(
      <%= JSON.stringify([['Equipe', 'Total de Membros'], ...dadosGrafico.map(row => [row.nome_equipe, row.total_membros])]) %>
    );

    const options = {
      title: 'Quantidade de Membros por Equipe',
      legend: { position: 'none' },
      colors: ['#4285F4'],
      chartArea: { width: '70%' },
      hAxis: {
        minValue: 0
      }
    };

    const chart = new google.visualization.BarChart(document.getElementById('grafico'));
    chart.draw(data, options);
  }
</script>
</head>
<body>
  <script src="/scripts/menu.js"></script>
  <script>initMenu('dashboards');</script>

  <div style="flex-grow:1; padding: 30px;">
    <h2>Dashboard de Equipes</h2>
    <div id="grafico" style="width: 100%; height: 500px;"></div>
  </div>
</body>
</html>
